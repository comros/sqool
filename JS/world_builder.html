<!DOCTYPE html>
<html lang="pl-PL">
<head>
    <meta charset="UTF-8">
    <title>Strona</title>
</head>
<body>
    
</body>
<script type="text/javascript">
var body_ = document.body;
var map_ = document.createElement("div");

var rows = 100;
var columns = 100;

function Start()
{
    body_.appendChild(map_);
    body_.style.backgroundColor = "#1B2430";
    map_.style.overflow = "hidden";
    map_.style.display = "inline-block";
    map_.id = "map";

    CreateMap();
    ClickHandler();
}
Start();

function CreateMap()
{
    for(var y = 1; y <= rows; y++)
    {
        for(var x = 1; x <= columns; x++)
        {
            var tile_ = document.createElement("div");
            map_.appendChild(tile_);
            tile_.style.float = "left";
            tile_.style.backgroundColor = "#816797";
            tile_.style.width = "1vh";
            tile_.style.height = "1vh";
            tile_.id = "X" + x + "Y" + y;
        } 
        map_.appendChild(document.createElement("br"));
    }
}

function ClickHandler()
{
    var mode = 1;

    addEventListener("keydown", (event) => {
        if(event.key == 1) mode = 1;
        else if(event.key == 2) mode = 2;
    });

    map_.addEventListener("mouseover", (event) => { // mousedown

        var tileID = event.target.id;
        var tile_ = document.getElementById(tileID);

        let mouseDown = 0;
        window.onmousedown = () => {
        ++mouseDown;
        if (mouseDown) {
            if((tile_.dataset.value == null || tile_.dataset.value == "Not Clicked") && mode == 1) 
            {
                tile_.style.backgroundColor = "#51557E";
                tile_.dataset.value = "Clicked";
            }
            else if(tile_.dataset.value == "Clicked" && mode == 2)
            {
                tile_.style.backgroundColor = "#816797";
                tile_.dataset.value = "Not Clicked";
            }
        }
        }
    });
}

</script>
</html>
